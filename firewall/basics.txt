# üî• Firewall - Conceitos e Configura√ß√£o B√°sica (FortiGate)

Este guia apresenta os fundamentos de firewalls e os principais conceitos de configura√ß√£o usando **FortiGate**, uma solu√ß√£o de seguran√ßa de rede bastante utilizada em ambientes corporativos.

---

## üî∞ Introdu√ß√£o

- **FortiGate** √© ideal para **pequenas empresas**.  
- **Palo Alto** √© mais indicado para ambientes de **grande porte**.
- O **per√≠metro firewall** marca o in√≠cio da intranet, sendo o ponto de controle entre rede interna e externa.

### Tipos de Firewall:

| Tipo                 | Fun√ß√£o                                          |
|----------------------|--------------------------------------------------|
| **Firewall de Rede** | Protege a infraestrutura de rede.               |
| **Firewall de Aplica√ß√£o** | Controla o acesso √† aplica√ß√£o dentro da rede. |

---

## üõ°Ô∏è Zonas do Firewall

- **In**: zona confi√°vel (ex: LAN).
- **Out**: zona n√£o confi√°vel (ex: Internet).
- **DMZ**: zona neutra entre In e Out.

### DMZ (Demilitarized Zone)

- Possui **DMZ interna** e **externa**.
- Se a **DMZ externa** for comprometida, a interna ainda estar√° protegida.
- Acesso externo √† rede **deve passar pela DMZ**.

---

## üìã Pol√≠ticas e Tabelas

### üîß Pol√≠ticas

- Definem a **l√≥gica do tr√°fego permitido** (quem pode acessar o qu√™, quando e como).

### üìö Tabelas Importantes

| Tabela             | Descri√ß√£o                                                                 |
|--------------------|--------------------------------------------------------------------------|
| **Roteamento**      | Decide como encaminhar pacotes com base em IP, m√°scara, porta e gateway. |
| **Conex√£o (Stateful)** | Armazena conex√µes ativas para permitir inspe√ß√£o de pacotes de retorno. |

### üß© Observa√ß√µes

- A **comunica√ß√£o s√≥ ocorre** se houver **pol√≠tica permitindo**.
- A intranet **n√£o aceita conex√µes externas** por padr√£o (firewall bloqueia).

---

## üîí FortiGate - Configura√ß√£o B√°sica

### üîß Configura√ß√£o Padr√£o

- IP padr√£o: `192.168.1.99/24`
- Em m√°quinas virtuais, a configura√ß√£o deve ser feita manualmente.

### üåê FortiGuard

- Traz patches de antiv√≠rus e atualiza√ß√µes.
- Libere acesso √†s URLs abaixo, caso haja outro firewall:

    update.fortiguard.com

    services.fortiguard.net

    security.fortiguard.net

    ### Modos de Acesso:

- **GUI (Web)**
- **CLI (Linha de Comando)**

---

## üåê Zones (Zonas)

- **Zonas** s√£o agrupamentos l√≥gicos de interfaces.
- Usadas para aplicar pol√≠ticas a m√∫ltiplas interfaces ao mesmo tempo.
- Permite isolar e segmentar diferentes √°reas da rede.
- √â poss√≠vel controlar tr√°fego **entre interfaces da mesma zona** (intra-zone).

---

## üñß Interfaces

| Interface | Fun√ß√£o                                          |
|-----------|--------------------------------------------------|
| **WAN**    | Entrada da internet (recebe IP p√∫blico do ISP).  |
| **LAN**    | Rede interna (usa IPs privados).                 |

---

## ‚öôÔ∏è Exemplo de Configura√ß√£o CLI

```shell
config system interface  
edit port1  
set mode static  
set ip 192.168.1.99/24  
set allowaccess http https ping ssh  
end  

config router static  
edit 0  
set device port1  
set dst 0.0.0.0/0  
set gateway 192.168.1.1  
end  

## üë• Usu√°rios e Perfis

- Crie **usu√°rios administrativos** para tarefas de manuten√ß√£o do FortiGate.
- √â poss√≠vel **configurar perfis** personalizados com permiss√µes espec√≠ficas para diferentes fun√ß√µes.

---

## üì° DHCP

FortiGate pode atuar como servidor **DHCP** para entregar IPs automaticamente aos dispositivos da rede.

### üßæ Processo DHCP:

1. **Discovery** ‚Äì Cliente envia broadcast buscando um servidor DHCP.  
2. **Offer** ‚Äì Servidor responde oferecendo um IP (via unicast).  
3. **Request** ‚Äì Cliente solicita o IP recebido.  
4. **Acknowledge** ‚Äì Servidor confirma a concess√£o do IP.

- Caso j√° exista um servidor DHCP na rede, o FortiGate pode funcionar como **DHCP Relay**.

---

## üîÄ VLANs (Virtual LANs)

- FortiGate **suporta trunking**, permitindo m√∫ltiplas VLANs por interface f√≠sica.
- Ideal para segmentar redes **l√≥gica e organizacionalmente**.
- Cada **interface VLAN** pode ter suas pr√≥prias pol√≠ticas e regras.

---

## üåê DNS e Zona de Dom√≠nio

- Para permitir **uso de dom√≠nios internos**, voc√™ pode configurar uma **zona de dom√≠nio** diretamente no FortiGate.
- Isso √© √∫til em redes com resolu√ß√£o DNS personalizada ou ambientes corporativos integrados.

---

## üíæ Backup e Atualiza√ß√µes

### üîÑ Backup

- Salve a configura√ß√£o atual do dispositivo FortiGate:
  - Via GUI (web)
  - Via CLI (`execute backup config`)

### üìà Atualiza√ß√µes de Firmware

- Menu:  
  `System > Fabric Management > Firmware`
- Recomenda-se sempre manter o FortiGate **atualizado com o firmware est√°vel mais recente**.

---

## üîÑ NAT (Network Address Translation)

NAT permite que dispositivos com **IPs privados** acessem a internet usando **IP p√∫blico**.

### üí° Cen√°rio Comum

- FortiGate recebe IP p√∫blico do **ISP**.
- Dispositivos internos usam IPs como `192.168.x.x` ou `10.x.x.x`.

### üìò Tabela NAT

- Mant√©m associa√ß√µes entre IPs **internos e externos** para controle de tr√°fego.

### Tipos de NAT:

| Tipo   | Descri√ß√£o |
|--------|-----------|
| **SNAT (Source NAT)** | Troca o IP de origem (privado) por um IP p√∫blico. |
| **DNAT (Destination NAT)** | Redireciona o IP p√∫blico para um IP interno (ex: servidores). |

### üß∞ Recursos Adicionais

- **IP Pool**: conjunto de IPs p√∫blicos usados dinamicamente (modo Overload).
- **One-to-One NAT**: mapeia 1 IP privado para 1 IP p√∫blico fixo.
- NAT permite **m√∫ltiplas conex√µes simult√¢neas**, mesmo com poucas portas p√∫blicas.

---

‚úÖ Finalize suas configura√ß√µes com testes e logs para garantir que as regras NAT, DHCP e VLANs estejam funcionando como esperado.  
Para acesso remoto seguro, utilize VPNs ao inv√©s de expor portas de administra√ß√£o do FortiGate diretamente.

---