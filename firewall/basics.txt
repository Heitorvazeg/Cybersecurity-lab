Firewall - Conceitos e Configura√ß√£o B√°sica (FortiGate)
üî∞ Introdu√ß√£o

    Fortigate √© √≥timo para pequenas empresas; para grandes, Palo Alto √© indicado.

    Per√≠metro firewall marca o in√≠cio da intranet.

    Tipos de firewall:

        Firewall de rede: protege a rede.

        Firewall de aplica√ß√£o: controla acesso √† aplica√ß√£o dentro da rede.

üõ°Ô∏è Zonas do Firewall

    In: zona confi√°vel.

    Out: zona n√£o confi√°vel.

    DMZ: zona neutra, buffer entre In e Out.

        Configura-se DMZ interna e externa.

        Se DMZ externa for rompida, a interna pode continuar protegida.

    O acesso externo via firewall acontece pela DMZ.

üìã Pol√≠ticas e Tabelas

    Pol√≠ticas definem a l√≥gica do tr√°fego permitido.

    Tabela de roteamento (roteador): decide como encaminhar pacotes via IP, m√°scara, porta e pr√≥ximo salto.

    Tabela de conex√£o (firewall stateful):

        Guarda conex√µes ativas para inspecionar pacotes de resposta.

        Se conex√£o j√° existe, n√£o inspeciona novamente.

    Comunica√ß√£o s√≥ ocorre se pol√≠tica permitir conex√£o.

    A intranet n√£o recebe requisi√ß√µes externas, apenas envia; tr√°fego recebido √© bloqueado.

üîí Fortigate - Configura√ß√£o B√°sica

    Configura√ß√£o padr√£o: IP 192.168.1.99/24 (em VM deve configurar manualmente).

    Fortiguard traz patches de antiv√≠rus e atualiza√ß√µes pela internet.

    URLs a liberar caso haja outro firewall:

        update.fortiguard.com

        services.fortiguard.net

        security.fortiguard.net

    Acesso pode ser via GUI ou CLI.

üåê Zones

    Controle l√≥gico de grupos de interfaces.

    Aplicam pol√≠ticas para toda a zona (exemplo: VLAN, DMZ, LAN).

    Permite isolar √°reas da rede.

    Configura tr√°fego intra-zona (entre interfaces da mesma zona).

üñß Interfaces

    WAN: ponto de entrada da internet.

        Recebe IP p√∫blico do ISP.

        Aplica pol√≠ticas de seguran√ßa.

    LAN: interface interna, IP privado para gerenciar rede.

‚öôÔ∏è Configura√ß√£o CLI Exemplo

config system interface  
edit port1  
set mode static  
set ip 192.168.1.99/24  
set allowaccess http https ping ssh  
end  

config router static  
edit 0  
set device port1  
set dst 0.0.0.0/0  
set gateway 192.168.1.1  
end  

üë• Usu√°rios e Perfis

    Criar usu√°rios administrativos para manuten√ß√£o.

    Configurar perfis conforme necessidade.

üì° DHCP

    Pode atuar como servidor DHCP na interface configurada (ex: port1).

    Processo DHCP:

        Discovery (broadcast para encontrar servidor DHCP).

        Offer (unicast oferecendo IP).

        Request (broadcast solicitando IP).

    Pode usar DHCP relay se j√° existir servidor DHCP na rede.

üîÄ VLANs

    Suportam modo trunk para m√∫ltiplas redes em uma √∫nica interface f√≠sica.

    Criar interfaces VLAN para segmentar redes.

    VLANs agrupam sub-redes logicamente.

üåê DNS e Dom√≠nio

    Para usar dom√≠nios, criar zona de dom√≠nio no firewall.

üíæ Backup e Atualiza√ß√µes

    Backup: baixar configura√ß√£o completa.

    Atualiza√ß√£o de firmware: via Management System > Fabric Management.

üîÑ NAT (Network Address Translation)

    IPs privados (ex: 10.0.0.0, 192.168.0.0) s√£o convertidos para IPs p√∫blicos para acesso √† internet.

    ISP fornece IP p√∫blico para o Fortigate.

    NAT table associa IP privado a p√∫blico.

    Tipos de NAT:

        SNAT (Source NAT): troca IP de origem privado pelo p√∫blico.

        DNAT (Destination NAT): troca IP p√∫blico por privado para servidores acess√≠veis externamente.

    NAT limita portas usadas, mas m√∫ltiplas conex√µes coexistem.

    IP Pool: conjunto de IPs p√∫blicos para uso din√¢mico (Overload).

    One-to-One NAT: mapeia um IP privado para um IP p√∫blico exclusivo.

