# ü™ü Windows Internals & Security Concepts

## ‚ö†Ô∏è Por que o Windows √© t√£o visado?
- √â amplamente utilizado e vendido.
- Alvo frequente de **malwares** e **ataques hackers**.
- A Microsoft define quando vers√µes deixar√£o de ser suportadas.
- Empresas dependem do Windows e s√£o for√ßadas a atualizar, muitas vezes **sem preparo de hardware e rede**.
- **Windows Server** √© o sistema operacional voltado para servidores.

---

## üìÅ File Systems

### üî∏ NTFS (New Technology File System)
- Substituiu FAT16 e FAT32.
- Suporta:
  - Arquivos maiores que 4GB.
  - Permiss√µes espec√≠ficas para arquivos e pastas.
  - Compress√£o de arquivos e pastas.
  - Criptografia com **EFS (Encrypting File System)**.
- Recupera√ß√£o autom√°tica em caso de falha, usando arquivos de log.

### üî∏ FAT32
- Antigo sistema de arquivos.
- Ainda usado em pendrives e sistemas legados.
- **Linux** tamb√©m usa FAT32 para compatibilidade.
- **N√£o** possui journaling nem suporte a permiss√µes ou criptografia.

---

## üß® ADS ‚Äì Alternate Data Streams
- Permite armazenar **metadados invis√≠veis** em arquivos NTFS.
- Pode ser usado para esconder **malwares**.
- Cada arquivo possui pelo menos um data stream chamado `$DATA`.
- Exemplo: usando PowerShell √© poss√≠vel ler ADS.

> **Obs:** ao mover arquivos com ADS de NTFS para FAT, o stream √© perdido, pois FAT n√£o suporta ADS.

---

## üß¨ System32 e Vari√°veis

- A pasta `Windows` cont√©m o SO.
- `%windir%` √© uma vari√°vel de ambiente que aponta para a pasta do sistema.
  - Evita caminhos fixos.
  - Usado para armazenar valores globais como pastas tempor√°rias, paths, etc.

---

## üë§ Conta e Perfil de Usu√°rio

- Existem perfis:
  - **Administrador:** controle total.
  - **Usu√°rio comum:** permiss√µes limitadas.
- Os perfis s√£o armazenados em `C:\Users\`.
- Ao criar uma nova conta, o sistema gera o perfil na primeira vez que o usu√°rio faz login.
- `lusrmgr.msc` acessa o gerenciador de contas locais.

---

## üõ°Ô∏è UAC ‚Äì User Account Control

- **Separa privil√©gios administrativos.**
- Mesmo logado como administrador, o UAC requer confirma√ß√£o ("sim/n√£o").
- Se o usu√°rio n√£o for administrador, o UAC pede as **credenciais do administrador**.
- Ajuda a bloquear a√ß√µes maliciosas feitas por programas automaticamente.
- Pode ser configurado nas ferramentas do sistema.

---

## ‚öôÔ∏è Configura√ß√µes e Painel de Controle

- `Configura√ß√µes` (√≠cone de engrenagem): interface moderna e simplificada.
- `Painel de Controle` (`control` no `Win + R`): op√ß√µes mais avan√ßadas e detalhadas.
  - `Small icons` revela categorias espec√≠ficas.

---

## üß† Task Manager (`taskmgr`)
- Mostra aplica√ß√µes e processos em execu√ß√£o.
- `More details` revela uso de recursos: CPU, RAM, disco, rede.

---

## ü™õ System Configuration (`msconfig`)
- `General`: seleciona o que ser√° carregado no boot.
- `Boot`, `Services`, `Startup`, `Tools`: controle e diagn√≥stico do sistema.

---

## üñ•Ô∏è Gerenciador do Computador (`compmgmt.msc`)

- Acesso a:
  - **System Tools**: visualizador de eventos, tarefas agendadas.
  - **Storage**: discos e volumes.
  - **Services and Applications**: servi√ßos do sistema.

### üîé Visualizador de Eventos
- Tipos de logs:
  - **Erro**: algo falhou.
  - **Aviso**: evento que exige aten√ß√£o (ex: espa√ßo em disco).
  - **Informa√ß√£o**: registro de eventos bem-sucedidos.
  - **Success Audit / Failure Audit**: logs relacionados a permiss√µes e seguran√ßa.

---

## üìä Performance Monitor (`perfmon`)
- Analisa m√©tricas de desempenho em tempo real.

---

## üß∞ Device Manager
- Gerencia e configura o hardware do sistema.

---

## üõ†Ô∏è Services
- S√£o aplica√ß√µes que rodam em segundo plano.

---

## üìã System Information (`msinfo32`)
- Mostra:
  - Informa√ß√µes de hardware, software e ambiente.
  - Problemas conhecidos, drivers, processos, servi√ßos.

---

## üì° Resource Monitor (`resmon`)
- An√°lise avan√ßada de:
  - **CPU**, **Disco**, **Mem√≥ria** e **Rede**.
- Pode aplicar filtros e investigar conflitos.
- Excelente para troubleshooting.

---

## üíª Comandos √öteis no CMD

| Comando       | Fun√ß√£o                                 |
|---------------|-----------------------------------------|
| `hostname`    | Mostra o nome do computador             |
| `whoami`      | Mostra o nome do usu√°rio atual          |
| `cls`         | Limpa o terminal                        |
| `netstat`     | Exibe conex√µes de rede e portas         |
| `comando /?`  | Mostra ajuda para qualquer comando      |
| `help <cmd>`  | Alternativa para visualizar ajuda       |

---

## üß† Registry Editor (`regedit`)
- Banco de dados com configura√ß√µes do sistema.
- Armazena dados para:
  - Usu√°rios, aplica√ß√µes, drivers, servi√ßos, hardware, propriedades.
- √Åreas principais:
  - `HKEY_LOCAL_MACHINE` ‚Äì configura√ß√µes do sistema.
  - `HKEY_CURRENT_USER` ‚Äì configura√ß√µes do usu√°rio logado.

---

## üîÑ Updates

- Onde se pegam novos patches e atualiza√ß√µes do sistema operacional.
- Logs de atualiza√ß√µes dispon√≠veis para auditoria.

---

## üõ°Ô∏è Seguran√ßa

### üîí √Åreas de Prote√ß√£o

- **4 √Åreas**:
  - Virus & Threat Protection
  - Firewall & Network Protection
  - App & Browser Control
  - Device Security

> üü¢ Verde: tudo ok | üü° Amarelo: aviso | üî¥ Vermelho: risco

### ü¶† Virus & Threat Protection

- **Current Threats**: escaneia pastas e verifica hist√≥rico de amea√ßas.
- **Virus & Threat Settings**:
  - Real-time protection
  - Cloud protection
  - Controlled folder access
- **Ransomware protection** tamb√©m est√° inclu√≠do.

> **Dica:** Clique com o bot√£o direito em arquivos/pastas para escanear com o Microsoft Defender.

### üî• Firewall & Network Protection

- Acesse com `WF.msc`.
- Perfis:
  - **Dom√≠nio**: redes com autentica√ß√£o via controlador de dom√≠nio.
  - **Privado**: redes dom√©sticas ou de confian√ßa.
  - **P√∫blico**: redes p√∫blicas como Wi-Fi.
- Permite apps por exce√ß√£o.

### üåê App & Browser Control

- Prote√ß√£o contra phishing e sites maliciosos.
- **SmartScreen** verifica apps e servi√ßos desconhecidos.
- **Exploit Protection** protege contra ataques de baixo n√≠vel.

### üíæ Device Security

- **Core Isolation**: processos de alta seguran√ßa.
- **TPM**: chip f√≠sico com mecanismos de seguran√ßa.
- **BitLocker**: criptografia de disco, usa TPM para prote√ß√£o de dados.
- **VSS** (Volume Shadow Copy Service): backups e restaura√ß√£o de sistema.

---

## üß± Active Directory (AD)

- Essencial em ambientes corporativos.
- Gerencia usu√°rios, servi√ßos e dispositivos centralmente.

### üè¢ Dom√≠nios Windows

- Agrupamento de usu√°rios e m√°quinas sob administra√ß√£o central.
- O **Domain Controller (DC)** √© o servidor com AD instalado.
- Poss√≠vel aplicar **pol√≠ticas de seguran√ßa em escala**.

### üß© AD DS (Active Directory Domain Services)

- Servi√ßo principal do AD para gerenciamento de dom√≠nios.

objetos do ad:
usuario: maiscomum; security principals; podem ser autenticados pelo dominio.
Usuarios sao people ou services. Services sao usuarios que rodam apenas
services especificos.

machines:
cada computador se torna uma maquina. Os computadores sao como os administradorres
locais deles mesmo. Se vc tem a senha consegue logar.
Nomes de maquinas: DC01$, o dolar segue todo nome de maquina.

security groups:
Grupos pra definir acessos e recursos. Pode ter grupo de maquinas ou usuarios.
Grupos padroes: Domain admins, server operators, backup operatos, domain users...

OU -> organization unitys. Representa as partes do dominio.
Diferente de grupos, logica mais ampla.
Groups sao usados para garantir recursos e permissoes.
OUs sao usados para aplicar politicas.

folders padrao:
builtin: GRupos padroes.
Computers: computadores que estao no dominio.
DOmain controllers: OU padrao que contem o DC.
Users: Usuarios e grupos que estao no dominino.
Service accountes: cONTAS Que estao sendo usadas por servi√ßos no domninio.

administrando usuarios e OUs:
Por padrao OUs tem bloqueio de deletar.
Pra retirar, ta em view e visualizar avan√ßado, e objeto.

delegation:
delega controle sobre OUs sem precisar de uma permissao de admn.
UM otimo caso e o pessoal de TI que pode alterar contas de outros,
mas nao de superiores.

RDP remote desktop connection:
permite vc logar em outro usuario.
mstsc e o comando.


administrando maquinas:
todas as maquinas exceto o DC vao estar em computers.
LPT Laptop, PC e SRV pra servidor.
Tipos de forma de organizar:
Workstations: maquinas de trabalho.
Servers: servidores.
Domain cntrolers: os DCs.

Criar no proprio thm.local.